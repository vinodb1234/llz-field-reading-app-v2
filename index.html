<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <title>LLZ Field Reading App</title>

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <div class="topbar">
    <div class="topbar-row container">
      <button class="menu-btn" id="menuBtn">â˜°</button>
      <div class="title">LLZ Field Reading App</div>
      <div class="subtitle">Developed by B. Vinod, Manager (CNS)</div>
    </div>
  </div>

  <div id="sideMenu" class="side-menu" aria-hidden="true">

    <div class="menu-header">LLZ Field Reading App</div>

    <div class="menu-list">
      <button id="mBasic">Basic Details</button>
      <button id="mPresent">Present Readings</button>
      <button id="mReference">Reference Readings</button>
      <button id="mResults">Graphs & Tables</button>
      <button id="mSaved">Saved Reports</button>
      <button id="mExportImgs">Export Images</button>
      <button id="mExportExcel">Export Excel</button>
      <button id="mClear">Clear All Data</button>
    </div>

    <div class="menu-footer">Developed by B. Vinod, Manager (CNS)</div>
  </div>

  <!-- APP PAGES -->
  <div id="pageMeta" class="page container"></div>
  <div id="pageStage" class="page container hidden"></div>
  <div id="pageTxSelect" class="page container hidden"></div>
  <div id="pageDirection" class="page container hidden"></div>
  <div id="pageWizard" class="page container hidden"></div>
  <div id="pageResults" class="page container hidden"></div>
  <div id="pageSaved" class="page container hidden"></div>

  <!-- LIBRARIES -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- MAIN APP -->
  <script src="app.js"></script>

  <script>
    /* SIDE MENU */
    const menuBtn = document.getElementById("menuBtn");
    const side = document.getElementById("sideMenu");

    menuBtn.onclick = () => side.classList.toggle("show");

    document.getElementById("mBasic").onclick = () => { side.classList.remove("show"); showPage("pageMeta"); };

    document.getElementById("mPresent").onclick = () => {
      side.classList.remove("show");
      state.current.stage = "present";
      buildTxSelect();
      showPage("pageTxSelect");
    };

    document.getElementById("mReference").onclick = () => {
      side.classList.remove("show");
      state.current.stage = "reference";
      buildTxSelect();
      showPage("pageTxSelect");
    };

    document.getElementById("mResults").onclick = () => {
      side.classList.remove("show");
      buildResultsPage();
      showPage("pageResults");
    };

    document.getElementById("mSaved").onclick = () => {
      side.classList.remove("show");
      buildSavedPage();
      showPage("pageSaved");
    };

    document.getElementById("mExportImgs").onclick = () => {
      side.classList.remove("show");
      exportGraphImages();
    };

    document.getElementById("mExportExcel").onclick = () => {
      side.classList.remove("show");
      exportExcel();
    };

    document.getElementById("mClear").onclick = () => {
      if (confirm("Clear all data?")) {
        localStorage.clear();
        location.reload();
      }
    };

    /* SERVICE WORKER */
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>
</body>
</html>
